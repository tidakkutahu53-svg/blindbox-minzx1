<!DOCTYPE html>
<html lang="ms">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Blind Box by minzX</title>
  <style>
    :root{
      --card-bg: rgba(241,196,15,0.95);
      --panel-bg: rgba(0,0,0,0.6);
      --glass: rgba(255,255,255,0.06);
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,Arial,Helvetica,sans-serif}
    body{
      display:flex;
      flex-direction:column;
      align-items:center;
      padding:18px;
      background-image:url('https://i.postimg.cc/CLLbMnkx/gambar-mi.jpg');
      background-size:cover;
      background-position:center;
      color:#fff;
      -webkit-font-smoothing:antialiased;
    }

    header{
      width:100%;
      max-width:520px;
      display:flex;
      justify-content:center;
      margin-top:8px;
      margin-bottom:18px;
    }
    h1{
      margin:0;
      padding:10px 18px;
      border-radius:10px;
      background:var(--panel-bg);
      font-size:20px;
      letter-spacing:0.4px;
    }

    .game {
      width:100%;
      max-width:520px;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:16px;
      padding:18px;
      background: linear-gradient(180deg, rgba(0,0,0,0.25), rgba(0,0,0,0.18));
      border-radius:14px;
      backdrop-filter: blur(4px);
    }

    /* Box / Spinner */
    .box-wrap{
      width:200px;
      height:200px;
      display:flex;
      align-items:center;
      justify-content:center;
      position:relative;
    }

    #box {
      width:170px;
      height:170px;
      border-radius:12px;
      background:var(--card-bg);
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:700;
      font-size:20px;
      color:#111;
      cursor:pointer;
      user-select:none;
      transform-origin:center;
      box-shadow:0 8px 24px rgba(0,0,0,0.3);
    }

    /* spin animation */
    .spinning {
      animation: spin-anim 900ms cubic-bezier(.2,.9,.3,1);
    }
    @keyframes spin-anim{
      0% { transform: rotateX(0) rotateY(0) scale(1); }
      25% { transform: rotateX(50deg) rotateY(20deg) scale(1.02); }
      60% { transform: rotateX(-240deg) rotateY(360deg) scale(1); }
      100% { transform: rotateX(0) rotateY(0) scale(1); }
    }

    /* Result panel */
    .result {
      width:100%;
      max-width:420px;
      background:var(--panel-bg);
      padding:12px 14px;
      border-radius:10px;
      text-align:center;
    }
    .result .text{
      font-size:18px;
      margin-bottom:8px;
    }
    .code {
      display:inline-block;
      background:var(--glass);
      padding:8px 12px;
      border-radius:8px;
      font-weight:700;
      letter-spacing:1px;
      margin-bottom:10px;
    }

    .controls{
      display:flex;
      gap:10px;
      justify-content:center;
      flex-wrap:wrap;
      margin-top:8px;
    }
    button {
      appearance:none;
      border:0;
      padding:10px 14px;
      border-radius:10px;
      cursor:pointer;
      font-weight:700;
    }
    .btn-spin { background:#ffca28; color:#111; }
    .btn-whatsapp { background:#25D366; color:white; }
    .btn-copy { background:#4a90e2; color:white; }

    /* responsive */
    @media (max-width:420px){
      #box{width:140px;height:140px;font-size:18px}
      .box-wrap{width:160px;height:160px}
      h1{font-size:18px;padding:8px 12px}
    }
  </style>
</head><!-- tidakkutahu53@gmail.com -->
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<script>
  (function(){
    emailjs.init("zcEyobn5cOG4idT9ojP8h"); // zcEyobn5cOG4idT9ojP8h
  })();
</script>
<body>

<header>
  <h1>Blind Box by minzX</h1>
</header>

<main class="game" role="main" aria-live="polite">
  <div class="box-wrap">
    <div id="box" role="button" aria-pressed="false" tabindex="0">Klik Saya!</div>
  </div>

  <div id="resultPanel" class="result" aria-hidden="true" style="display:none">
    <div class="text" id="resultText">Anda dapat:</div>
    <div class="code" id="codeText">—</div>
    <div class="controls">
      <button id="spinAgain" class="btn-spin">Spin Again</button>
      <button id="copyCode" class="btn-copy">Copy Kod</button>
      <button id="orderBtn" class="btn-whatsapp">tekan </button>
    </div>
  </div>
</main>

<script>
  // Items and settings
  const hadiah = ["Acc FF","Acc ML","Acc TT"];
  const waNumber = "6282260381016"; // nombor tujuan
  const box = document.getElementById("box");
  const resultPanel = document.getElementById("resultPanel");
  const resultText = document.getElementById("resultText");
  const codeText = document.getElementById("codeText");
  const spinAgain = document.getElementById("spinAgain");
  const copyCode = document.getElementById("copyCode");
  const orderBtn = document.getElementById("orderBtn");

  // Generate alphanumeric code, length 8
  function generateCode(len = 8){
    const chars = "ABCDEFGHJKLMNPQRSTUVWXYZ23456789"; // avoid similar chars
    let out = "";
    for(let i=0;i<len;i++){
      out += chars.charAt(Math.floor(Math.random() * chars.length));
    }
    return out;
  }

  // Run a spin: animate + show result + new code
  function runSpin(){
    // disable during spin
    box.style.pointerEvents = "none";
    box.classList.remove("spinning");
    // force reflow to restart animation
    void box.offsetWidth;
    box.classList.add("spinning");
    box.setAttribute("aria-pressed","true");

    // small timeout to simulate spin duration (match CSS animation ~900ms)
    setTimeout(()=>{
      // choose item and code
      const item = hadiah[Math.floor(Math.random() * hadiah.length)];
      const code = generateCode(8);
      // update UI
      resultText.textContent = "Anda dapat: " + item;
      codeText.textContent = code;
      resultPanel.style.display = "block";
      resultPanel.setAttribute("aria-hidden","false");

      // re-enable interactions
      box.style.pointerEvents = "";
      box.setAttribute("aria-pressed","false");

      // focus for accessibility
      spinAgain.focus();

      // store current item+code on element dataset for order button / copy
      resultPanel.dataset.currentItem = item;
      resultPanel.dataset.currentCode = code;
    }, 950);
  }
  // Click handlers
  box.addEventListener("click", runSpin);
  box.addEventListener("keydown", (e)=>{
    if(e.key === "Enter" || e.key === " ") { e.preventDefault(); runSpin(); }
  });

  spinAgain.addEventListener("click", runSpin);

  copyCode.addEventListener("click", async ()=>{
    const code = resultPanel.dataset.currentCode || codeText.textContent;
    if(!code || code === "—") return;
    try{
      await navigator.clipboard.writeText(code);
      copyCode.textContent = "Disalin";
      setTimeout(()=> copyCode.textContent = "Copy Kod", 1200);
    }catch(e){
      // fallback: select text
      const el = document.createElement('textarea');
      el.value = code;
      document.body.appendChild(el);
      el.select();
      document.execCommand('copy');
      document.body.removeChild(el);
      copyCode.textContent = "Disalin";
      setTimeout(()=> copyCode.textContent = "Copy Kod", 1200);
    }
  });

  orderBtn.addEventListener("click", ()=>{
    const item = encodeURIComponent(resultPanel.dataset.currentItem || "");
    const code = encodeURIComponent(resultPanel.dataset.currentCode || "");
    const msg = encodeURIComponent(`Saya nak order: ${item} | Kod: ${code}`);
    const url = `https://wa.me/${waNumber}?text=${msg}`;
    window.open(url, "_blank");
  });

  // Initialize: hide panel until first spin
  resultPanel.style.display = "none";
</script>

</body>
</html>
